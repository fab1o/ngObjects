"use strict";var ngObjects={};ngObjects.module=function(){return angular.module("ngObjects",[])}(),ngObjects.keyCode=function(){return{LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13}}(),ngObjects.remoteControl=function(){return{ON_FOCUS:"onFocus",ON_BLUR:"onBlur",ON_UP:"onUp",ON_DOWN:"onDown",ON_RIGHT:"onRight",ON_LEFT:"onLeft",ON_SELECT:"onSelect"}}(),ngObjects.utility=new function(){function extend(subclass,superclass){function subclassPrototype(){this.constructor=subclass}for(var propertyName in superclass)superclass.hasOwnProperty(propertyName)&&(subclass[propertyName]=superclass[propertyName]);return subclassPrototype.prototype=superclass.prototype,subclass.prototype=null===superclass?Object.create(superclass):(subclassPrototype.prototype=superclass.prototype,new subclassPrototype),subclass._super=superclass.prototype,subclass}return{extend:extend}},ngObjects.dataStructures=function(){var Node=function(){function Node(value,id){++_id,this.id=id||_id,this.value=value,this.up=null,this.down=null,this.left=null,this.right=null,this.column=0}var _id=0;return Node.prototype={focus:function(){return this.value.focus()},blur:function(){return this.value.blur()},select:function(){return this.value.select()},deselect:function(){return this.value.deselect()}},Node}(),Map=function(){function Map(){this.length=0,this.current=null,this.currentId=0,this._head=null,this.nodes=[]}return Map.prototype={get head(){return this._head},set head(value){this._head=value},initArrayUpDown:function(array){if(array instanceof Array&&array)for(var i=0;i<array.length;i++)this.pushDownFromNode(array[i],this.current)},initArrayLeftRight:function(array){if(array instanceof Array&&array)for(var i=0;i<array.length;i++)this.pushRightFromNode(array[i],this.current)},initNode:function(node){return this.current=node,this.head=this.current,this.length++,this.current},createNode:function(value){this.currentId++;var node=new Node(value);return node.id=this.currentId,value.nodeId=node.id,this.nodes.push(node),node},init:function(value){return this.current=this.createNode(value),this.head=this.current,this.length++,this.current},pushDown:function(value){var newNode=this.createNode(value);return 0==this.length?this.initNode(newNode):(this.current.down=newNode,this.current=newNode,this.length++,this.current)},pushDownFromCurrent:function(value){var newNode=this.createNode(value);return 0==this.length?this.initNode(newNode):(this.current.down=newNode,newNode.up=this.current,this.current=newNode,this.length++,this.current)},pushDownFromNode:function(value,node){if("undefined"==typeof node||null==node)return this.pushDownFromCurrent(value);var newNode=this.createNode(value);return node.down=newNode,newNode.up=node,this.current=newNode,this.length++,this.current},pushUp:function(value){var newNode=this.createNode(value);return 0==this.length?this.initNode(newNode):(newNode.up=this.current,this.current=newNode,this.length++,this.current)},pushUpFromCurrent:function(value){var newNode=this.createNode(value);return 0==this.length?this.initNode(newNode):(newNode.up=this.current,this.current.down=newNode,this.current=newNode,this.length++,this.current)},pushUpFromNode:function(value,node){if("undefined"==typeof node||null==node)return this.pushUpFromCurrent(value);var newNode=this.createNode(value);return newNode.up=node,node.down=newNode,this.current=newNode,this.length++,this.current},pushLeft:function(value){var newNode=this.createNode(value);return 0==this.length?this.initNode(newNode):(this.current.left=newNode,this.current=newNode,this.length++,this.current)},pushLeftFromCurrent:function(value){var newNode=this.createNode(value);return 0==this.length?this.initNode(newNode):(this.current.left=newNode,newNode.right=this.current,this.current=newNode,this.length++,this.current)},pushLeftFromNode:function(value,node){if("undefined"==typeof node||null==node)return this.pushLeftFromCurrent(value);var newNode=this.createNode(value);return node.left=newNode,newNode.right=node,this.current=newNode,this.length++,this.current},pushRight:function(value){var newNode=this.createNode(value);return 0==this.length?this.initNode(newNode):(this.current.right=newNode,this.current=newNode,this.length++,this.current)},pushRightFromCurrent:function(value){var newNode=this.createNode(value);return 0==this.length?this.initNode(newNode):(this.current.right=newNode,newNode.left=this.current,this.current=newNode,this.length++,this.current)},pushRightFromNode:function(value,node){if("undefined"==typeof node||null==node)return this.pushRightFromCurrent(value);var newNode=this.createNode(value);return node.right=newNode,newNode.left=node,this.current=newNode,this.length++,this.current},size:function(){return this.length},find:function(id){if(null==id||"undefined"==typeof id)return null;for(var i=0;i<this.nodes.length;i++)if(this.nodes[i].id==id)return this.nodes[i];return null},findFocused:function(){for(var i=0;i<this.nodes.length;i++)if(this.nodes[i].value.isFocused)return this.nodes[i];return null},findSelected:function(){for(var i=0;i<this.nodes.length;i++)if(this.nodes[i].value.isSelected)return this.nodes[i];return null}},Map}(),SquaredMap=function(base){function SquaredMap(column){this.qtyColumns=column||0,this.multipleColumnsChanged=0,base.call(this)}return ngObjects.utility.extend(SquaredMap,base),SquaredMap.prototype.setColumn=function(column){this.qtyColumns!=column&&(0!=this.qtyColumns&&(this.currentId=0,this.multipleColumnsChanged++),this.qtyColumns=column||this.qtyColumns)},SquaredMap.prototype.getColumn=function(id,row){var column=0;return id%this.qtyColumns+this.qtyColumns==this.qtyColumns?column=this.qtyColumns:id%4+4==4?column=4:id%2+2==2?column=2:id-row*this.qtyColumns==3?column=3:id-row*this.qtyColumns==1&&(column=1),column},SquaredMap.prototype.getLeftNodeByColumn=function(column){for(var current=this.current;current=current.left;)if(current.column==column)return current;return null},SquaredMap}(Map),LinkedList=function(){function LinkedList(){this.length=0,this.head=null,this.tail=null}return LinkedList.prototype={init:function(array){if(array)for(var i=0;i<array.length;i++)this.add(array[i])},push:function(value){this.add(value)},add:function(value){var node={value:value,next:null,previous:null};0==this.length?(this.head=node,this.tail=node):(this.tail.next=node,node.previous=this.tail,this.tail=node),this.length++},size:function(){return this.length},firstNode:function(){return this.item(0)},lastNode:function(){return this.item(this.length-1)},nodeExists:function(value){for(var current=this.head,i=0;i++<this.length;){if(current.value===value)return i;current=current.next}return-1},getNode:function(index){if(index>this.length-1||0>index)return null;for(var current=this.head,i=0;i++<index;)current=current.next;return current},removeNode:function(index){if(index>this.length-1||0>index)return null;var current=this.head,i=0;if(0==index)this.head=current.next,null==this.head?this.tail=null:this.head.previous=null;else if(index==this.length-1)current=this.tail,this.tail=current.previous,this.tail.next=null;else{for(;i++<index;)current=current.next;current.previous.next=current.next,current.next.previous=current.previous}return this.length--,current.value},pop:function(){return this.remove(this.length-1)},toArray:function(){for(var list=[this.head.value],current=this.head;current=current.next;)list.push(current.value);return list}},LinkedList}();return{Map:Map,SquaredMap:SquaredMap,Node:Node,LinkedList:LinkedList}}(),ngObjects.eventManager=function(){function EventTarget(){this.listeners={}}return EventTarget.prototype={constructor:EventTarget,addListener:function(type,listener,exclusive){return"undefined"==typeof listener||null==listener?!1:"string"!=typeof type?!1:("undefined"==typeof this.listeners[type]&&(this.listeners[type]=[]),exclusive&&this.removeListener(type),this.listeners[type].push(listener),!0)},fire:function(type,args,callback){if("string"!=typeof type)return null;var event={type:type,args:args,callback:callback,cancel:!1};if(event.target||(event.target=this),this.listeners[event.type]instanceof Array)for(var listeners=this.listeners[event.type],i=0,len=listeners.length;len>i&&i<listeners.length;i++)listeners[i].call(this,event);return event},removeListener:function(type,listener){var found=!1;if("string"!=typeof type)return!1;if(this.listeners[type]instanceof Array)if("undefined"==typeof listener||null==listener)found=this.listeners[type].length>0,this.listeners[type]=[];else for(var listeners=this.listeners[type],i=0,len=listeners.length;len>i&&i<listeners.length;i++)if(listeners[i]===listener){listeners.splice(i,1),found=!0;break}return found},removeListeners:function(type){return this.removeListener(type)},size:function(type){return this.listeners[type].length}},{EventTarget:EventTarget}}(),ngObjects["abstract"]={},ngObjects["abstract"].FocusableObject=function(){function FocusableObject(){this.isFocused=!1}return FocusableObject.prototype.onFocused=function(){},FocusableObject.prototype.focus=function(){return this.isFocused=!0,this.onFocused&&this.onFocused(),!0},FocusableObject.prototype.onBlured=function(){},FocusableObject.prototype.blur=function(){return this.isFocused=!1,this.onBlured&&this.onBlured(),!0},FocusableObject}(),ngObjects["abstract"].SelectableObject=function(base){function SelectableObject(){base.call(this),this.isSelected=!1,this.isDisabled=!1}return ngObjects.utility.extend(SelectableObject,base),SelectableObject.prototype.onDeselected=function(){},SelectableObject.prototype.deselect=function(){return this.isSelected=!1,this.onDeselected&&this.onDeselected(),!0},SelectableObject.prototype.onSelected=function(){},SelectableObject.prototype.select=function(){return this.isDisabled?void 0:(this.isSelected=!0,this.onSelected&&this.onSelected(),!0)},SelectableObject.prototype.disable=function(){return this.isDisabled=!0,!0},SelectableObject.prototype.enable=function(){return this.isDisabled=!1,!0},SelectableObject}(ngObjects["abstract"].FocusableObject),function(base){function buttonFactory(){function Button(){base.call(this),this.name=""}return ngObjects.utility.extend(Button,base),{Button:Button}}var factoryId="buttonFactory";ngObjects.module.factory(factoryId,buttonFactory)}(ngObjects["abstract"].SelectableObject),ngObjects.DIRECTION=function(){return{RIGHT:"right",LEFT:"left",DOWN:"down",UP:"up"}}(),function(base){function handlerFactory($log,inputService,timerFactory){function Handler(options){base.call(this),options=options||{isFocused:!1,name:"",id:0,isDebug:!0,autoSelect:!1,autoFocus:!1,autoSelectDelay:null,autoFocusDelay:null},this.isFocused=!1,this.name=options.name||"Handler",this.id=options.id||0,this.isDebug="undefined"==typeof options.isDebug||options.isDebug,options.autoSelect=options.autoSelect||!1,options.autoFocus=options.autoFocus||!1,this.autoSelect=new timerFactory.Timer({selectableObject:this,name:this.name,isEnabled:options.autoSelect,functionName:"select",delay:options.autoSelectDelay}),this.autoFocus=new timerFactory.Timer({selectableObject:this,name:this.name,isEnabled:options.autoFocus,functionName:"focus",delay:options.autoFocusDelay}),this.isDebug&&$log.warn(serviceId,this.name+".new",options),this.map=null,this.currentSelected=null,this.currentFocused=null;var self=this;this.listener=function(e){var keyCode=e.args.keyCode;keyCode==ngObjects.keyCode.UP?self.up():keyCode==ngObjects.keyCode.DOWN?self.down():keyCode==ngObjects.keyCode.RIGHT?self.right():keyCode==ngObjects.keyCode.LEFT?self.left():keyCode==ngObjects.keyCode.ENTER&&self.select()},options.isFocused&&self.focus()}return Handler.prototype=new base,Handler.prototype.constructor=Handler,Handler.prototype.setMap=function(map,options){return null==map||map instanceof ngObjects.dataStructures.Map?(options=options||{reset:null==map,focusOnNode:null},options.focusOnNode=options.focusOnNode||null,("undefined"==typeof options.reset||null==options.reset)&&(options.reset=null==map||null==map.head),options.reset&&(this.currentFocused&&this.currentFocused.blur(),this.currentSelected&&this.currentSelected.deselect(),this.currentSelected=null,this.currentFocused=null),map&&map.head&&(options.focusOnNode?this.currentFocused=options.focusOnNode:(this.currentFocused=map.findFocused(),this.currentSelected=map.findSelected()),this.currentFocused&&this.focus()),void(this.map=map)):(this.isDebug&&$log.error(serviceId,this.name+".setMap","argument 'map' is not a Map"),!1)},Handler.prototype.hasMap=function(){return null!=this.map&&this.map instanceof ngObjects.dataStructures.Map?null!=this.map.head:!1},Handler.prototype.up=function(){return this.isDebug&&$log.info(serviceId,this.name+".up"),this.fire(ngObjects.remoteControl.ON_UP,{currentFocused:this.currentFocused,currentSelected:this.currentSelected}),null==this.currentFocused?(this.isDebug&&$log.info(serviceId,this.name+".currentFocused is null"),!1):null==this.currentFocused.up?(this.isDebug&&$log.info(serviceId,this.name+".currentFocused.up is null"),!1):(this.autoSelect.cancelTimer(ngObjects.remoteControl.ON_UP),this.autoFocus.cancelTimer(ngObjects.remoteControl.ON_UP),this.currentFocused.blur(),this.currentFocused=this.currentFocused.up,this.currentFocused.focus(),this.autoFocus.startTimer(ngObjects.remoteControl.ON_UP),this.autoSelect.startTimer(ngObjects.remoteControl.ON_UP),!0)},Handler.prototype.down=function(){return this.isDebug&&$log.info(serviceId,this.name+".down"),this.fire(ngObjects.remoteControl.ON_DOWN,{currentFocused:this.currentFocused,currentSelected:this.currentSelected}),null==this.currentFocused?(this.isDebug&&$log.info(serviceId,this.name+".currentFocused is null"),!1):null==this.currentFocused.down?(this.isDebug&&$log.info(serviceId,this.name+".currentFocused.down is null"),!1):(this.autoSelect.cancelTimer(ngObjects.remoteControl.ON_DOWN),this.autoFocus.cancelTimer(ngObjects.remoteControl.ON_DOWN),this.currentFocused.blur(),this.currentFocused=this.currentFocused.down,this.currentFocused.focus(),this.autoFocus.startTimer(ngObjects.remoteControl.ON_DOWN),this.autoSelect.startTimer(ngObjects.remoteControl.ON_DOWN),!0)},Handler.prototype.left=function(){return this.isDebug&&$log.info(serviceId,this.name+".left"),this.fire(ngObjects.remoteControl.ON_LEFT,{currentFocused:this.currentFocused,currentSelected:this.currentSelected}),null==this.currentFocused?(this.isDebug&&$log.info(serviceId,this.name+".currentFocused is null"),!1):null==this.currentFocused.left?(this.isDebug&&$log.info(serviceId,this.name+".currentFocused.left is null"),!1):(this.autoSelect.cancelTimer(ngObjects.remoteControl.ON_LEFT),this.autoFocus.cancelTimer(ngObjects.remoteControl.ON_LEFT),this.currentFocused.blur(),this.currentFocused=this.currentFocused.left,this.currentFocused.focus(),this.autoFocus.startTimer(ngObjects.remoteControl.ON_LEFT),this.autoSelect.startTimer(ngObjects.remoteControl.ON_LEFT),!0)},Handler.prototype.right=function(){return this.isDebug&&$log.info(serviceId,this.name+".right"),this.fire(ngObjects.remoteControl.ON_RIGHT,{currentFocused:this.currentFocused,currentSelected:this.currentSelected}),null==this.currentFocused?(this.isDebug&&$log.info(serviceId,this.name+".currentFocused is null"),!1):null==this.currentFocused.right?(this.isDebug&&$log.info(serviceId,this.name+".currentFocused.right is null"),!1):(this.autoSelect.cancelTimer(ngObjects.remoteControl.ON_RIGHT),this.autoFocus.cancelTimer(ngObjects.remoteControl.ON_RIGHT),this.currentFocused.blur(),this.currentFocused.right instanceof ngObjects.dataStructures.Node&&(this.currentFocused=this.currentFocused.right,this.currentFocused.focus(),this.autoFocus.startTimer(ngObjects.remoteControl.ON_RIGHT),this.autoSelect.startTimer(ngObjects.remoteControl.ON_RIGHT)),!0)},Handler.prototype.select=function(options){return options=options||{selectOnNode:null},options.selectOnNode=options.selectOnNode||null,this.autoSelect.cancelTimer(ngObjects.remoteControl.ON_SELECT),this.autoFocus.cancelTimer(ngObjects.remoteControl.ON_SELECT),this.isDebug&&$log.warn(serviceId,this.name+".select"),null==this.currentFocused&&null==options.selectOnNode?!1:(this.currentSelected&&this.currentSelected.deselect(),options.selectOnNode?(options.selectOnNode.select(),this.currentSelected=options.selectOnNode):(this.currentFocused.select(),this.currentSelected=this.currentFocused),this.fire(ngObjects.remoteControl.ON_SELECT,{currentFocused:this.currentFocused,currentSelected:this.currentSelected}),!0)},Handler.prototype.blur=function(options){return this.autoFocus.cancelTimer(ngObjects.remoteControl.ON_BLUR),options=options||{blurCurrentFocused:!1,cancelTimer:!0},options.blurCurrentFocused=options.blurCurrentFocused||!1,("undefined"==typeof options.cancelTimer||null==options.cancelTimer)&&(options.cancelTimer=!0),options.cancelTimer&&this.autoSelect.cancelTimer(ngObjects.remoteControl.ON_BLUR),this.isFocused?(this.isDebug&&$log.info(serviceId,this.name+".blur.NOT.listening"),this.isFocused=!1,inputService.removeListener(inputService.ON_KEY_DOWN,this.listener),options.blurCurrentFocused&&this.currentFocused&&this.currentFocused.blur(),void this.fire(ngObjects.remoteControl.ON_BLUR,{currentFocused:this.currentFocused,currentSelected:this.currentSelected})):!0},Handler.prototype.focus=function(options){return options=options||{forced:!1,firstNode:!1,focusCurrentSelected:!1,refocus:!1},options.refocus=options.refocus||!1,options.forced=options.forced||!1,options.firstNode=options.firstNode||!1,options.focusCurrentSelected=options.focusCurrentSelected||!1,this.isFocused&&0==options.forced&&0==options.refocus?!1:options.refocus&&!this.isFocused?!1:(this.isDebug&&$log.info(serviceId,this.name+".focus.YES.listening"),this.isFocused=!0,options.focusCurrentSelected&&this.currentSelected?(this.currentFocused&&this.currentFocused.blur(),this.currentFocused=this.currentSelected,this.currentFocused.focus()):this.currentFocused?this.currentFocused.focus():this.setFocusToFirstNode(),this.currentFocused&&this.currentFocused.isFocused&&this.autoFocus.startTimer(ngObjects.remoteControl.ON_FOCUS),inputService.addListener(inputService.ON_KEY_DOWN,this.listener,!1),this.fire(ngObjects.remoteControl.ON_FOCUS),!0)},Handler.prototype.fixfocus=function(){return $log.info(serviceId,this.name+".fixfocus"),this.isFocused?(this.focus(),!0):!1},Handler.prototype.refocus=function(){$log.info(serviceId,this.name+".refocus"),this.focus({refocus:!0})},Handler.prototype.setFocusToNode=function(node,options){return null==node?!1:node instanceof ngObjects.dataStructures.Node?this.exists(node)?($log.info(serviceId,this.name+".setFocusToNode"),this.currentFocused&&this.currentFocused.blur(),this.currentFocused=node,this.focus(options)):!1:(this.isDebug&&$log.error(serviceId,this.name+".setFocusToNode","argument 'node' is not a Node"),!1)},Handler.prototype.setSelectedToNode=function(node){return null==node?!1:node instanceof ngObjects.dataStructures.Node?this.exists(node)?(this.isDebug&&$log.info(serviceId,this.name+".setSelectedToNode"),this.currentSelected&&this.currentSelected.deselect(),this.currentSelected=node,this.currentSelected.select(),!0):!1:(this.isDebug&&$log.error(serviceId,this.name+".setSelectedToNode","argument 'node' is not a Node"),!1)},Handler.prototype.exists=function(node){var found=!1;if(this.hasMap()&&this.map.nodes)for(var n in this.map.nodes)if(this.map.nodes[n]===node){found=!0;break}return found||this.isDebug&&$log.error(serviceId,this.name+".exists","argument 'node' is not in this map"),found},Handler.prototype.deselect=function(){return this.currentSelected&&this.currentSelected.deselect(),!0},Handler.prototype.setFocusToFirstNode=function(){return this.isDebug&&$log.info(serviceId,this.name+".setFocusToFirstNode"),this.hasMap()?(this.currentFocused&&this.currentFocused.blur(),this.currentFocused=this.map.head,this.currentFocused.focus(),this.autoFocus.startTimer(ngObjects.remoteControl.ON_FOCUS),!0):!1},Handler.prototype.setSelectedToFirstNode=function(){return null==this.map||null==this.map.head?!1:(this.isDebug&&$log.info(serviceId,this.name+".setSelectedToFirstNode"),this.currentSelected&&this.currentSelected.deselect(),this.currentSelected=this.map.head,this.currentSelected.select(),!0)},Handler.prototype.is=function(handlerName){return this.name==handlerName},Handler.prototype.toString=function(){return this.name},{Handler:Handler}}var serviceId="handlerFactory";ngObjects.module.factory(serviceId,["$log","inputService","timerFactory",handlerFactory])}(ngObjects.eventManager.EventTarget),function(){function handlerService($log,handlerFactory){return this.current=null,this.handlers=[],this.states=[],this.createNewHandler=function(options){var handler=new handlerFactory.Handler(options);return this.handlers.push(handler),handler},this.focus=function(handler,options){return null==handler?($log.error(serviceId,"argument 'handler' cannot be null"),!1):(options=options||{select:!1,skipBlurCurrent:!1},options.select=options.select||!1,options.skipBlurCurrent=options.skipBlurCurrent||!1,this.currentFocused&&(this.currentFocused.blur({blurCurrentFocused:this.currentFocused.name!=handler.name}),$log.warn(serviceId,"transitioning from "+this.currentFocused.name+" to "+handler.name)),this.currentFocused=handler,this.currentFocused.focus(options),options.select&&this.currentFocused.select(),!0)},this.getHandlerStates=function(){this.states=[];for(var i=0;i<this.handlers;i++){var handler=this.handlers[i];handler&&this.states.push({name:handler.name,isFocused:handler.isFocused})}return this.states},this.blurAll=function(skipAppHandler){$log.info(serviceId,"blurAll"),this.getHandlerStates();for(var i=0;i<this.handlers;i++){var handler=this.handlers[i];handler&&handler.blur()}return!0},this.undoBlur=function(){$log.info(serviceId,"undoBlur");for(var i=0;i<this.handlers;i++){var handler=this.handlers[i];if(handler)for(var j=0;j<this.states;j++)this.states[j].name==handler.name&&this.states[j].isFocused&&handler.focus()}return!0},this}var serviceId="handlerService";ngObjects.module.service(serviceId,["$log","handlerFactory",handlerService])}(),function(base){function inputService($log){function initWeb(){return $log.info(serviceId,"initWeb"),document.onmousemove=function(){var inputKeyAnchor=document.getElementById("ngObjects-key-anchor");inputKeyAnchor&&inputKeyAnchor.focus()},!0}return base.call(this),this.ON_KEY_DOWN="onKeyDown",this.init=function(){return $log.info(serviceId,"init"),initWeb(),!0},this.onKeyDown=function(event){var keyCode=event.keyCode,keyChar=null;switch(keyCode){case ngObjects.keyCode.LEFT:keyChar="KEY.LEFT";break;case ngObjects.keyCode.RIGHT:keyChar="KEY.RIGHT";break;case ngObjects.keyCode.UP:keyChar="KEY.UP";break;case ngObjects.keyCode.DOWN:keyChar="KEY.DOWN";break;case ngObjects.keyCode.ENTER:keyChar="KEY.ENTER";break;default:keyChar="NOT.DEFINED"}return keyChar&&$log.info(serviceId,"onKeyDown(keyCode: "+keyCode+", keyChar: "+keyChar+")"),this.fire(this.ON_KEY_DOWN,{keyCode:keyCode}),!0},this}var serviceId="inputService";ngObjects.module.service(serviceId,["$log",inputService]),inputService.prototype=new base,inputService.prototype.constructor=inputService}(ngObjects.eventManager.EventTarget),function(){function mapFactory(){function createLinearMap(options){options=options||{};for(var objects=options.objects||[],direction=options.direction||ngObjects.DIRECTION.RIGHT,isCircular=options.isCircular,map=new ngObjects.dataStructures.Map,i=0;i<objects.length;i++)switch(direction){case ngObjects.DIRECTION.RIGHT:map.pushRightFromCurrent(objects[i]);break;case ngObjects.DIRECTION.LEFT:map.pushLeftFromCurrent(objects[i]);break;case ngObjects.DIRECTION.UP:map.pushUpFromCurrent(objects[i]);break;case ngObjects.DIRECTION.DOWN:map.pushDownFromCurrent(objects[i])}if(isCircular&&objects.length>=2&&map.current&&map.head)switch(direction){case ngObjects.DIRECTION.RIGHT:map.current.right=map.head,map.head.left=map.current;break;case ngObjects.DIRECTION.LEFT:map.current.left=map.head,map.head.right=map.current;break;case ngObjects.DIRECTION.UP:map.current.up=map.head,map.head.down=map.current;break;case ngObjects.DIRECTION.DOWN:map.current.down=map.head,map.head.up=map.current}return map}function createGridMap(options){options=options||{};var objects=options.objects||[],rowsSize=options.rowsSize||4;rowsSize=Math.ceil(rowsSize);for(var map=new ngObjects.dataStructures.Map,rows=[],columns=[],max=objects.length,i=1;max>=i;i++){var o=objects[i-1],node=new ngObjects.dataStructures.Node(o,i);map.nodes.push(node);var mod=i%rowsSize;if(rows.length>0){var lastRow=rows[rows.length-1],col=(mod||rowsSize)-1;lastRow[col].down=node,node.up=lastRow[col]}columns.length>0&&(columns[columns.length-1].right=node,node.left=columns[columns.length-1]),columns.push(node),(0==mod||mod==max)&&(rows.push(columns),columns=[])}return rows.length>0&&rows[0].length>0&&(map.head=rows[0][0]),map}return{createGridMap:createGridMap,createLinearMap:createLinearMap}}var factoryId="mapFactory";ngObjects.module.factory(factoryId,[mapFactory])}(),function(){function timerFactory($timeout,$log){function Timer(options){options=options||{selectableObject:null,isEnabled:!1,name:"",delay:null,functionName:""},this.selectableObject=options.selectableObject||null,this.timer=null,this.timeoutId=0,this.isEnabled=options.isEnabled||!1,null==this.selectableObject&&(this.isEnabled=!1),"undefined"==typeof options.functionName||null==options.functionName?(this.isEnabled=!1,this.functionName=null):this.functionName=options.functionName,this.name=options.name||"",this.delay=options.delay||DEFAULT_DELAY[this.functionName.toUpperCase()]||1,this.name&&this.isEnabled&&$log.info(factoryId,this.name+".autoselect enabled")}var DEFAULT_DELAY={SELECT:.7,FOCUS:1.5};return Timer.prototype.fire=function(){return this.selectableObject&&this.selectableObject.select?($log.warn(factoryId,this.name+".fire."+this.timeoutId),this.selectableObject[this.functionName](),!0):!1},Timer.prototype.cancelTimer=function(debugInfo){return this.timer?($timeout.cancel(this.timer),this.timer=null,debugInfo?$log.warn(factoryId,this.name+".cancelTimer."+debugInfo+"."+this.timeoutId):$log.warn(factoryId,this.name+".cancelTimer."+this.timeoutId),this.timeoutId=0,!0):!1},Timer.prototype.startTimer=function(debugInfo){if(!this.isEnabled)return!1;var self=this;return this.timer=$timeout(function(){self.fire(),self.timer=null},500*this.delay),this.timeoutId=this.timer.$$timeoutId,debugInfo?$log.info(factoryId,this.name+".startTimer."+debugInfo+"."+this.timeoutId):$log.info(factoryId,this.name+".startTimer."+this.timeoutId),!0},{Timer:Timer}}var factoryId="timerFactory";ngObjects.module.factory(factoryId,["$timeout","$log",timerFactory])}(),function(){ngObjects.module.directive("ngObjects",["$log","inputService",function($log,inputService){return inputService.init(),{template:"<a href='javascript:void(0);' id='ngObjects-key-anchor' ng-keydown='onKeyDown($event)' />",restrict:"E",replace:!0,link:function(scope,elem){scope.onKeyDown=function(event){inputService.onKeyDown(event)},elem[0].focus()}}}])}();